# Homework_bot
## Python telegram bot, описание проекта:
В этом учебном проекте был создан Telegram-бот, который будет обращаться к API сервиса Практикум.Домашка и узнавать статус домашней работы:
- взята ли домашка в ревью;
- проверена ли она;
- а если проверена — то принял её ревьюер или вернул на доработку.

## СТЕК технологий:
* Python == 3.10.12
* Python-telegram-bot==13.7
* Requests==2.26.0
* Logging

## Функционал бота:
- раз в 10 минут опрашивает API сервис Практикум.Домашка и проверяет статус отправленной на ревью домашней работы;
- при обновлении статуса анализирует ответ API и отправляет соответствующее уведомление в Telegram;
- логирует свою работу и сообщает о важных проблемах сообщением в Telegram.

## Описание работы:
Последовательность действий в общем виде:
- Сделать запрос к API.
- Проверить ответ.
- Если есть обновления — получить статус работы из обновления и отправить сообщение в Telegram.
- Подождать некоторое время и вернуться в пункт 1.

## Функции в проекте:
- Функция check_tokens() проверяет доступность переменных окружения, которые необходимы для работы программы. Если отсутствует хотя бы одна переменная окружения — продолжать работу бота нет смысла.
- Функция get_api_answer() делает запрос к единственному эндпоинту API-сервиса. В качестве параметра в функцию передается временная метка. В случае успешного запроса возвращается ответ API, приведенный из формата JSON к типам данных Python.
- Функция check_response() проверяет ответ API на соответствие документации из урока API сервиса Практикум.Домашка. В качестве параметра функция получает ответ API, приведенный к типам данных Python.
- Функция parse_status() извлекает из информации о конкретной домашней работе статус этой работы. В качестве параметра функция получает только один элемент из списка домашних работ. В случае успеха, функция возвращает подготовленную для отправки в Telegram строку, содержащую один из вердиктов словаря HOMEWORK_VERDICTS.
- Функция send_message() отправляет сообщение в Telegram чат, определяемый переменной окружения TELEGRAM_CHAT_ID. Принимает на вход два параметра: экземпляр класса Bot и строку с текстом сообщения.

## Логирование:
Каждое сообщение в журнале логов состоит из
- даты и времени события;
- уровня важности события;
- описания события.

В проекте логируются такие события:
- отсутствие обязательных переменных окружения во время запуска бота (уровень CRITICAL).
- удачная отправка любого сообщения в Telegram (уровень DEBUG);
- сбой при отправке сообщения в Telegram (уровень ERROR);
- недоступность эндпоинта https://practicum.yandex.ru/api/user_api/homework_statuses/ (уровень ERROR);
- любые другие сбои при запросе к эндпоинту (уровень ERROR);
- отсутствие ожидаемых ключей в ответе API (уровень ERROR);
- неожиданный статус домашней работы, обнаруженный в ответе API (уровень ERROR);
- отсутствие в ответе новых статусов (уровень DEBUG).

События уровня ERROR не только логируются, но и информация о них пересылается в ваш Telegram в тех случаях, когда это технически возможно (если API Telegram перестанет отвечать или при старте программы не окажется нужной переменной окружения — ничего отправить не получится).
Если при каждой попытке бота получить и обработать информацию от API ошибка повторяется — сообщения о ней не будут дублироваться в Telegram: о такой ошибке будет отправлено лишь одно сообщение. При этом в логи будет записываться информация о каждой неудачной попытке.

## Автор:
[FeodorPyth](https://github.com/FeodorPyth)
